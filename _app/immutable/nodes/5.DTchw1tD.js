import{t as X,a as Y}from"../chunks/ud8kQJ12.js";import{ae as ee,ah as ae,a5 as M,i as C,a0 as te,a6 as re,g,Q as se,ai as le,aj as O,a4 as R,a7 as B,a8 as ne,ak as $,af as z,al as ie,am as H,ac as W,v as V,an as oe,Y as de,s as F,ao as fe,ap as ue,ab as ce,aq as ve,ar as be,as as _e,at as pe,a2 as me,x as he,B as ge,au as U,I as T,F as xe,H as I,ag as G,G as ye,p as J,av as Z,n as Ee,J as A}from"../chunks/CnDeBq6b.js";import{s as L}from"../chunks/CPWXgLKY.js";import{r as we,s as Ae,a as ke}from"../chunks/GzpAld_e.js";import{d as Te,e as Ie}from"../chunks/-I5texk6.js";import{p as q}from"../chunks/DY8A5v-X.js";import{c as Pe,P as Se,a as Ce}from"../chunks/BoyNrvuq.js";function Ne(o,e){return e}function Be(o,e,a,s){for(var v=[],u=e.length,d=0;d<u;d++)ue(e[d].e,v,!0);var x=u>0&&v.length===0&&a!==null;if(x){var m=a.parentNode;ce(m),m.append(a),s.clear(),P(o,e[0].prev,e[u-1].next)}ve(v,()=>{for(var c=0;c<u;c++){var t=e[c];x||(s.delete(t.k),P(o,t.prev,t.next)),be(t.e,!x)}})}function De(o,e,a,s,v,u=null){var d=o,x={items:new Map,first:null};{var m=o;d=C?M(te(m)):m.appendChild(ee())}C&&re();var c=null,t=!1,b=se(()=>{var r=a();return he(r)?r:r==null?[]:W(r)});ae(()=>{var r=g(b),f=r.length;if(t&&f===0)return;t=f===0;let l=!1;if(C){var y=d.data===le;y!==(f===0)&&(d=O(),M(d),R(!1),l=!0)}if(C){for(var E=null,n,i=0;i<f;i++){if(B.nodeType===8&&B.data===ne){d=B,l=!0,R(!1);break}var h=r[i],_=s(h,i);n=j(B,x,E,null,h,_,i,v,e,a),x.items.set(_,n),E=n}f>0&&M(O())}C||Me(r,x,d,v,e,s,a),u!==null&&(f===0?c?$(c):c=z(()=>u(d)):c!==null&&ie(c,()=>{c=null})),l&&R(!0),g(b)}),C&&(d=B)}function Me(o,e,a,s,v,u,d){var x=o.length,m=e.items,c=e.first,t=c,b,r=null,f=[],l=[],y,E,n,i;for(i=0;i<x;i+=1){if(y=o[i],E=u(y,i),n=m.get(E),n===void 0){var h=t?t.e.nodes_start:a;r=j(h,e,r,r===null?e.first:r.next,y,E,i,s,v,d),m.set(E,r),f=[],l=[],t=r.next;continue}if(Re(n,y,i),n.e.f&H&&$(n.e),n!==t){if(b!==void 0&&b.has(n)){if(f.length<l.length){var _=l[0],p;r=_.prev;var k=f[0],w=f[f.length-1];for(p=0;p<f.length;p+=1)K(f[p],_,a);for(p=0;p<l.length;p+=1)b.delete(l[p]);P(e,k.prev,w.next),P(e,r,k),P(e,w,_),t=_,r=w,i-=1,f=[],l=[]}else b.delete(n),K(n,t,a),P(e,n.prev,n.next),P(e,n,r===null?e.first:r.next),P(e,r,n),r=n;continue}for(f=[],l=[];t!==null&&t.k!==E;)t.e.f&H||(b??(b=new Set)).add(t),l.push(t),t=t.next;if(t===null)continue;n=t}f.push(n),r=n,t=n.next}if(t!==null||b!==void 0){for(var N=b===void 0?[]:W(b);t!==null;)t.e.f&H||N.push(t),t=t.next;var S=N.length;if(S>0){var D=x===0?a:null;Be(e,N,D,m)}}V.first=e.first&&e.first.e,V.last=r&&r.e}function Re(o,e,a,s){oe(o.v,e),o.i=a}function j(o,e,a,s,v,u,d,x,m,c){var t=(m&_e)!==0,b=(m&pe)===0,r=t?b?de(v):F(v):v,f=m&fe?F(d):d,l={i:f,v:r,k:u,a:null,e:null,prev:a,next:s};try{return l.e=z(()=>x(o,r,f,c),C),l.e.prev=a&&a.e,l.e.next=s&&s.e,a===null?e.first=l:(a.next=l,a.e.next=l.e),s!==null&&(s.prev=l,s.e.prev=l.e),l}finally{}}function K(o,e,a){for(var s=o.next?o.next.e.nodes_start:a,v=e?e.e.nodes_start:a,u=o.e.nodes_start;u!==s;){var d=me(u);v.before(u),u=d}}function P(o,e,a){e===null?o.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}const Q=Pe(Ce,Se),He=(o,e,a,s)=>{g(e)<g(a)&&(Z(e),s())},Ue=(o,e,a)=>{g(e)>1&&(Z(e,-1),a())};var Le=X('<tr><td class="p-2 border"> </td><td class="p-2 border"> </td><td class="p-2 border"><a class="p-2 text-white bg-black border rounded">View</a></td></tr>'),qe=X('<h1 class="text-lg font-bold text-center">Add Submission</h1> <form class="flex flex-col mb-5 space-y-5"><input type="hidden" name="submitted_by"> <label for="">Title</label> <input type="text" name="title" class="p-2 border border-black rounded" required> <label for="">Message</label> <textarea name="message" id="" class="p-2 border border-black rounded" required></textarea> <button class="p-5 text-white bg-black rounded" type="submit">Submit</button></form> <table class="w-full text-center border border-collapse"><thead><tr class="font-bold text-center"><td class="border">Title</td><td class="border">Submitted By:</td><td class="border">Action</td></tr></thead><tbody></tbody></table> <div class="flex justify-between mt-4"><button class="p-2 text-white bg-black rounded disabled:opacity-50">Previous</button> <span> </span> <button class="p-2 text-white bg-black rounded disabled:opacity-50">Next</button></div>',1);function Qe(o,e){ge(e,!0);let a=U(q([])),s=U(1),v=5,u=U(1);const d=async()=>{const i=(g(s)-1)*v,h=i+v-1,{data:_,error:p,count:k}=await Q.from("blogs").select("*",{count:"exact"}).range(i,h);p?console.error(p):(J(a,q(_)),J(u,q(Math.ceil(k/v))))},x=async i=>{i.preventDefault();const h=i.target,_=new FormData(h),p=_.get("title"),k=_.get("message"),w=_.get("submitted_by"),{data:N,error:S}=await Q.from("blogs").insert([{title:p,message:k,submitted_by:w}]);S?alert("Error: "+S.message):(alert("Blog submitted successfully!"),h.reset(),d())};d();var m=qe(),c=T(xe(m),2),t=I(c);we(t),Ee(10),A(c);var b=T(c,2),r=T(I(b));De(r,21,()=>g(a),Ne,(i,h)=>{var _=Le(),p=I(_),k=I(p,!0);A(p);var w=T(p),N=I(w,!0);A(w);var S=T(w),D=I(S);A(S),A(_),G(()=>{L(k,g(h).title),L(N,g(h).submitted_by??"anonymous"),ke(D,"href",`/blogs/${g(h).id??""}`)}),Y(i,_)}),A(r),A(b);var f=T(b,2),l=I(f);l.__click=[Ue,s,d];var y=T(l,2),E=I(y);A(y);var n=T(y,2);n.__click=[He,s,u,d],A(f),G(()=>{var i,h;Ae(t,(h=(i=e.data)==null?void 0:i.user)==null?void 0:h.email),l.disabled=g(s)===1,L(E,`Page ${g(s)??""} of ${g(u)??""}`),n.disabled=g(s)===g(u)}),Ie("submit",c,x),Y(o,m),ye()}Te(["click"]);export{Qe as component};
