import{t as G,a as O}from"../chunks/CFLjmR9U.js";import{an as ee,d as te,j as M,h as N,ad as ae,e as re,B as g,a4 as se,H as le,i as V,k as R,u as B,ah as ne,l as J,m as Q,o as ie,ao as H,al as W,N as Y,ap as oe,a9 as de,I as K,aq as fe,ar as ue,ak as ce,as as ve,at as be,au as _e,av as pe,af as me,P as he,p as ge,aw as U,s as T,f as xe,c as I,t as F,a as ye,K as X,ax as Z,n as Ee,r as k}from"../chunks/BaZMwfK4.js";import{s as L}from"../chunks/Bzbep4ep.js";import{r as we,s as ke,a as Ae}from"../chunks/oyr2Bh88.js";import{d as Te,e as Ie}from"../chunks/Cmjvs8Ka.js";import{p as q}from"../chunks/b3U-dJQ6.js";import{c as Pe,P as Se,a as Ne}from"../chunks/aMHpvxFn.js";function Ce(o,e){return e}function Be(o,e,t,s){for(var v=[],u=e.length,d=0;d<u;d++)ue(e[d].e,v,!0);var x=u>0&&v.length===0&&t!==null;if(x){var m=t.parentNode;ce(m),m.append(t),s.clear(),P(o,e[0].prev,e[u-1].next)}ve(v,()=>{for(var c=0;c<u;c++){var a=e[c];x||(s.delete(a.k),P(o,a.prev,a.next)),be(a.e,!x)}})}function De(o,e,t,s,v,u=null){var d=o,x={items:new Map,first:null};{var m=o;d=N?M(ae(m)):m.appendChild(ee())}N&&re();var c=null,a=!1,b=se(()=>{var r=t();return he(r)?r:r==null?[]:W(r)});te(()=>{var r=g(b),f=r.length;if(a&&f===0)return;a=f===0;let l=!1;if(N){var y=d.data===le;y!==(f===0)&&(d=V(),M(d),R(!1),l=!0)}if(N){for(var E=null,n,i=0;i<f;i++){if(B.nodeType===8&&B.data===ne){d=B,l=!0,R(!1);break}var h=r[i],_=s(h,i);n=j(B,x,E,null,h,_,i,v,e,t),x.items.set(_,n),E=n}f>0&&M(V())}N||Me(r,x,d,v,e,s,t),u!==null&&(f===0?c?J(c):c=Q(()=>u(d)):c!==null&&ie(c,()=>{c=null})),l&&R(!0),g(b)}),N&&(d=B)}function Me(o,e,t,s,v,u,d){var x=o.length,m=e.items,c=e.first,a=c,b,r=null,f=[],l=[],y,E,n,i;for(i=0;i<x;i+=1){if(y=o[i],E=u(y,i),n=m.get(E),n===void 0){var h=a?a.e.nodes_start:t;r=j(h,e,r,r===null?e.first:r.next,y,E,i,s,v,d),m.set(E,r),f=[],l=[],a=r.next;continue}if(Re(n,y,i),n.e.f&H&&J(n.e),n!==a){if(b!==void 0&&b.has(n)){if(f.length<l.length){var _=l[0],p;r=_.prev;var A=f[0],w=f[f.length-1];for(p=0;p<f.length;p+=1)$(f[p],_,t);for(p=0;p<l.length;p+=1)b.delete(l[p]);P(e,A.prev,w.next),P(e,r,A),P(e,w,_),a=_,r=w,i-=1,f=[],l=[]}else b.delete(n),$(n,a,t),P(e,n.prev,n.next),P(e,n,r===null?e.first:r.next),P(e,r,n),r=n;continue}for(f=[],l=[];a!==null&&a.k!==E;)a.e.f&H||(b??(b=new Set)).add(a),l.push(a),a=a.next;if(a===null)continue;n=a}f.push(n),r=n,a=n.next}if(a!==null||b!==void 0){for(var C=b===void 0?[]:W(b);a!==null;)a.e.f&H||C.push(a),a=a.next;var S=C.length;if(S>0){var D=x===0?t:null;Be(e,C,D,m)}}Y.first=e.first&&e.first.e,Y.last=r&&r.e}function Re(o,e,t,s){oe(o.v,e),o.i=t}function j(o,e,t,s,v,u,d,x,m,c){var a=(m&_e)!==0,b=(m&pe)===0,r=a?b?de(v):K(v):v,f=m&fe?K(d):d,l={i:f,v:r,k:u,a:null,e:null,prev:t,next:s};try{return l.e=Q(()=>x(o,r,f,c),N),l.e.prev=t&&t.e,l.e.next=s&&s.e,t===null?e.first=l:(t.next=l,t.e.next=l.e),s!==null&&(s.prev=l,s.e.prev=l.e),l}finally{}}function $(o,e,t){for(var s=o.next?o.next.e.nodes_start:t,v=e?e.e.nodes_start:t,u=o.e.nodes_start;u!==s;){var d=me(u);v.before(u),u=d}}function P(o,e,t){e===null?o.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const z=Pe(Ne,Se),He=(o,e,t,s)=>{g(e)<g(t)&&(Z(e),s())},Ue=(o,e,t)=>{g(e)>1&&(Z(e,-1),t())};var Le=G('<tr><td class="p-2 border"> </td><td class="p-2 border"> </td><td class="p-2 border"><a class="p-2 text-white bg-black border rounded">View</a></td></tr>'),qe=G('<h1 class="text-lg font-bold text-center">Add Submission</h1> <form class="flex flex-col mb-5 space-y-5"><input type="hidden" name="submitted_by"> <label for="">Title</label> <input type="text" name="title" class="p-2 border border-black rounded" required> <label for="">Message</label> <textarea name="message" id="" class="p-2 border border-black rounded" required></textarea> <button class="p-5 text-white bg-black rounded" type="submit">Submit</button></form> <table class="w-full text-center border border-collapse"><thead><tr class="font-bold text-center"><td class="border">Title</td><td class="border">Submitted By:</td><td class="border">Action</td></tr></thead><tbody></tbody></table> <div class="flex justify-between mt-4"><button class="p-2 text-white bg-black rounded disabled:opacity-50">Previous</button> <span> </span> <button class="p-2 text-white bg-black rounded disabled:opacity-50">Next</button></div>',1);function ze(o,e){ge(e,!0);let t=U(q([])),s=U(1),v=5,u=U(1);const d=async()=>{const i=(g(s)-1)*v,h=i+v-1,{data:_,error:p,count:A}=await z.from("blogs").select("*",{count:"exact"}).range(i,h);p?console.error(p):(X(t,q(_)),X(u,q(Math.ceil(A/v))))},x=async i=>{i.preventDefault();const h=i.target,_=new FormData(h),p=_.get("title"),A=_.get("message"),w=_.get("submitted_by"),{data:C,error:S}=await z.from("blogs").insert([{title:p,message:A,submitted_by:w}]);S?alert("Error: "+S.message):(alert("Blog submitted successfully!"),h.reset(),d())};d();var m=qe(),c=T(xe(m),2),a=I(c);we(a),Ee(10),k(c);var b=T(c,2),r=T(I(b));De(r,21,()=>g(t),Ce,(i,h)=>{var _=Le(),p=I(_),A=I(p,!0);k(p);var w=T(p),C=I(w,!0);k(w);var S=T(w),D=I(S);k(S),k(_),F(()=>{L(A,g(h).title),L(C,g(h).submitted_by??"anonymous"),Ae(D,"href",`/blogs/${g(h).id??""}`)}),O(i,_)}),k(r),k(b);var f=T(b,2),l=I(f);l.__click=[Ue,s,d];var y=T(l,2),E=I(y);k(y);var n=T(y,2);n.__click=[He,s,u,d],k(f),F(()=>{var i,h;ke(a,(h=(i=e.data)==null?void 0:i.user)==null?void 0:h.email),l.disabled=g(s)===1,L(E,`Page ${g(s)??""} of ${g(u)??""}`),n.disabled=g(s)===g(u)}),Ie("submit",c,x),O(o,m),ye()}Te(["click"]);export{ze as component};
