import{c as M,a as D,P as K}from"../chunks/aMHpvxFn.js";import{d as L,a as B}from"../chunks/CFLjmR9U.js";import"../chunks/CQlRmcQH.js";import{h as J,e as R,p as z,V as w,W as I,X as $,f as X,a as H,B as k,K as C,C as F}from"../chunks/BaZMwfK4.js";import{i as W}from"../chunks/DlUIlVbH.js";import{p as G}from"../chunks/Brlg9o_P.js";import{o as V}from"../chunks/EXvPe8Wv.js";import{d as Y}from"../chunks/Dix7JVtJ.js";function Z(e,t,r,n,o){var l;J&&R();var a=(l=t.$$slots)==null?void 0:l[r],u=!1;a===!0&&(a=t.children,u=!0),a===void 0||a(e,u?()=>n:n)}new TextEncoder;const Q=new TextDecoder,q=e=>{const t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r},ee=e=>{let t=e;t instanceof Uint8Array&&(t=Q.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return q(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}},te=ee;var re=Object.create,x=Object.defineProperty,ne=Object.getOwnPropertyDescriptor,A=Object.getOwnPropertyNames,oe=Object.getPrototypeOf,ie=Object.prototype.hasOwnProperty,ae=(e,t)=>function(){return t||(0,e[A(e)[0]])((t={exports:{}}).exports,t),t.exports},se=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of A(t))!ie.call(e,o)&&o!==r&&x(e,o,{get:()=>t[o],enumerable:!(n=ne(t,o))||n.enumerable});return e},P=(e,t,r)=>(r=e!=null?re(oe(e)):{},se(!e||!e.__esModule?x(r,"default",{value:e,enumerable:!0}):r,e)),N=ae({"../../node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js"(e){e.parse=n,e.serialize=o;var t=Object.prototype.toString,r=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function n(i,d){if(typeof i!="string")throw new TypeError("argument str must be a string");for(var h={},s=d||{},y=s.decode||a,p=0;p<i.length;){var c=i.indexOf("=",p);if(c===-1)break;var _=i.indexOf(";",p);if(_===-1)_=i.length;else if(_<c){p=i.lastIndexOf(";",c-1)+1;continue}var g=i.slice(p,c).trim();if(h[g]===void 0){var m=i.slice(c+1,_).trim();m.charCodeAt(0)===34&&(m=m.slice(1,-1)),h[g]=f(m,y)}p=_+1}return h}function o(i,d,h){var s=h||{},y=s.encode||u;if(typeof y!="function")throw new TypeError("option encode is invalid");if(!r.test(i))throw new TypeError("argument name is invalid");var p=y(d);if(p&&!r.test(p))throw new TypeError("argument val is invalid");var c=i+"="+p;if(s.maxAge!=null){var _=s.maxAge-0;if(isNaN(_)||!isFinite(_))throw new TypeError("option maxAge is invalid");c+="; Max-Age="+Math.floor(_)}if(s.domain){if(!r.test(s.domain))throw new TypeError("option domain is invalid");c+="; Domain="+s.domain}if(s.path){if(!r.test(s.path))throw new TypeError("option path is invalid");c+="; Path="+s.path}if(s.expires){var g=s.expires;if(!l(g)||isNaN(g.valueOf()))throw new TypeError("option expires is invalid");c+="; Expires="+g.toUTCString()}if(s.httpOnly&&(c+="; HttpOnly"),s.secure&&(c+="; Secure"),s.priority){var m=typeof s.priority=="string"?s.priority.toLowerCase():s.priority;switch(m){case"low":c+="; Priority=Low";break;case"medium":c+="; Priority=Medium";break;case"high":c+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(s.sameSite){var j=typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite;switch(j){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return c}function a(i){return i.indexOf("%")!==-1?decodeURIComponent(i):i}function u(i){return encodeURIComponent(i)}function l(i){return t.call(i)==="[object Date]"||i instanceof Date}function f(i,d){try{return d(i)}catch{return i}}}}),S=P(N()),T=P(N());function O(e){if(!e)return null;try{const t=JSON.parse(e);if(!t)return null;if(t.constructor.name==="Object")return t;if(t.constructor.name!=="Array")throw new Error(`Unexpected format: ${t.constructor.name}`);const[r,n,o]=t[0].split("."),a=te(n),u=new TextDecoder,{exp:l,sub:f,...i}=JSON.parse(u.decode(a));return{expires_at:l,expires_in:l-Math.round(Date.now()/1e3),token_type:"bearer",access_token:t[0],refresh_token:t[1],provider_token:t[2],provider_refresh_token:t[3],user:{id:f,factors:t[4],...i}}}catch(t){return console.warn("Failed to parse cookie string:",t),null}}function ce(e){var t;return JSON.stringify([e.access_token,e.refresh_token,e.provider_token,e.provider_refresh_token,((t=e.user)==null?void 0:t.factors)??null])}function v(){return typeof window<"u"&&typeof window.document<"u"}var E={path:"/",sameSite:"lax",maxAge:60*60*24*365*1e3};function ue(e){return new RegExp(".{1,"+e+"}","g")}var U=3180,le=ue(U);function fe(e,t,r){const n=le;if(Math.ceil(t.length/U)===1)return[{name:e,value:t}];const a=[],u=t.match(n);return u==null||u.forEach((l,f)=>{const i=`${e}.${f}`;a.push({name:i,value:l})}),a}function pe(e,t=()=>null){let r=[];for(let n=0;;n++){const o=`${e}.${n}`,a=t(o);if(!a)break;r.push(a)}return r.length?r.join(""):null}var de=class{constructor(e){this.cookieOptions={...E,...e,maxAge:E.maxAge}}getItem(e){const t=this.getCookie(e);if(e.endsWith("-code-verifier")&&t)return t;if(t)return JSON.stringify(O(t));const r=pe(e,n=>this.getCookie(n));return r!==null?JSON.stringify(O(r)):null}setItem(e,t){if(e.endsWith("-code-verifier")){this.setCookie(e,t);return}let r=JSON.parse(t);const n=ce(r);fe(e,n).forEach(a=>{this.setCookie(a.name,a.value)})}removeItem(e){this._deleteSingleCookie(e),this._deleteChunkedCookies(e)}_deleteSingleCookie(e){this.getCookie(e)&&this.deleteCookie(e)}_deleteChunkedCookies(e,t=0){for(let r=t;;r++){const n=`${e}.${r}`;if(this.getCookie(n)===void 0)break;this.deleteCookie(n)}}},he=class extends de{constructor(e){super(e)}getCookie(e){return v()?(0,S.parse)(document.cookie)[e]:null}setCookie(e,t){if(!v())return null;document.cookie=(0,S.serialize)(e,t,{...this.cookieOptions,httpOnly:!1})}deleteCookie(e){if(!v())return null;document.cookie=(0,S.serialize)(e,"",{...this.cookieOptions,maxAge:0,httpOnly:!1})}};function _e(e,t,r){var n;const o=v();return M(e,t,{...r,auth:{flowType:"pkce",autoRefreshToken:o,detectSessionInUrl:o,persistSession:!0,storage:r.auth.storage,...(n=r.auth)!=null&&n.storageKey?{storageKey:r.auth.storageKey}:{}}})}T.parse;T.serialize;/*! Bundled license information:

cookie/index.js:
  (*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/var ge=class extends he{constructor(e=null,t){super(t),this.serverSession=e}getItem(e){return v()?super.getItem(e):JSON.stringify(this.serverSession)}},b;function me({supabaseUrl:e,supabaseKey:t,event:r,serverSession:n,options:o,cookieOptions:a}){var u;const l=v();if(l&&b)return b;const f=_e(e,t,{...o,global:{fetch:r.fetch,...o==null?void 0:o.global,headers:{...(u=o==null?void 0:o.global)==null?void 0:u.headers,"X-Client-Info":"@supabase/auth-helpers-sveltekit@0.13.0"}},auth:{storage:new ge(n,a)}});return l&&(b=f),f}const ve=async({fetch:e,data:t,depends:r})=>{r("supabase:auth");const n=me({supabaseUrl:D,supabaseKey:K,event:{fetch:e},serverSession:t.session}),{data:{session:o}}=await n.auth.getSession();return{supabase:n,session:o}},xe=Object.freeze(Object.defineProperty({__proto__:null,load:ve},Symbol.toStringTag,{value:"Module"}));function Ae(e,t){z(t,!1);let r=G(t,"data",8),n=r(),o=w(n.supabase),a=w(n.session);V(()=>{const{data:{subscription:f}}=k(o).auth.onAuthStateChange((i,d)=>{var h;(d==null?void 0:d.expires_at)!==((h=k(a))==null?void 0:h.expires_at)&&Y("supabase:auth")});return()=>f.unsubscribe()}),I(()=>(k(o),k(a),F(r())),()=>{(f=>(C(o,f.supabase),C(a,f.session)))(r())}),$(),W();var u=L(),l=X(u);Z(l,t,"default",{}),B(e,u),H()}export{Ae as component,xe as universal};
